# 第五回
## やったこと
- 定義5.6.1(タイニーとマイニー)の定義を確認した(前回のコードを使って確認)
- ドミノ倒しを作った

# 目的
- -_G=- +_Gと+_Gを2回着手で-Gを得られるがいまいち納得出来なかったのでちゃんと成り立つことを確認したい
- 一応新しいプログラムを書くため

# 方法
先週作った版面から局面の値を出すコードを使いながら確認した
- 版面入れる(タイニーかマイニーを選択した後に)
- 連続で二回右(左)をとる
- 符号が入れ替わった形になるはずなのでそれらを見比べて正しいことを確かめる
- ドミノ倒しはゲームを作る

# 実行結果


## +_2

```

盤面のサイズを入力してください
縦: 8
横: 6
盤面を入力してください (B: 黒, W: 白, .: 空マス)
......
......
B.....
.B.W..
W.B...
...BW.
......
......

--- 計算結果 ---
この局面の値は: {0|{0|{|{|0}}}}
```
- 左(W)を2回とる


## -2

```
盤面のサイズを入力してください
縦: 8
横: 6
盤面を入力してください (B: 黒, W: 白, .: 空マス)
......
......
B.....
.BWW..
W.....
......
......
......

--- 計算結果 ---
この局面の値は: {|{|0}}

```

- 右(黒)に二回しか取れないから
- 左有利から右有利に変わる

## -_2


```
盤面のサイズを入力してください
縦: 8
横: 6
盤面を入力してください (B: 黒, W: 白, .: 空マス)
......
......
W.....
.W.B..
B.W...
...WB.
......
......

--- 計算結果 ---
この局面の値は: {{{{0|}|}|0}|0}
```

- 右(黒を二回とる)

## 2
```
盤面のサイズを入力してください
縦: 8
横: 6
盤面を入力してください (B: 黒, W: 白, .: 空マス)
......
......
W.....
.WBB..
B.....
......
......
......

--- 計算結果 ---
この局面の値は: {{0|}|}
```
- 右に2回しか取れない(確かに正しい)
- これも左有利だけど間違えると
- 右有利から左有利に変わる

# ドミノ倒し

<details><summary>ドミノ倒しのプログラム</summary>

```
#include <bits/stdc++.h>
using namespace std;
#define rep(i,n) for(int i=0;i<(n);i++)

string input_s(){
    while(true){
    string s;
    cout << "ドミノをいれてください(W,Bのみで)" << endl; 
    cin >> s;

    bool  check=true;
    for(char &e:s) {
        if (e != 'W' && e != 'B') {
                check = false; // 不正な文字が見つかった
                break; // ループを抜ける
            }
    }
    if(check)return s;
    else cout << "W,B以外の文字は入れないでください" << endl;
    }
}


string game(int cnt,string s){
        char player = (cnt % 2 == 0) ? 'W' : 'B'; // ターン数からプレイヤーを決定
        int pos;
        char dir;

    while(true) {
        //盤面表示
        cout << "\n-------------------------------\n";
        cout << "現在の盤面:   " << s << endl;
        cout << "インデックス: ";
        for(int i = 0; i < s.length(); ++i) cout << (i+1);
        cout << endl;
        cout << "プレイヤー " << player << " のターンです。" << endl;

        //入力
        cout << "倒すドミノを選択してください(数字): ";
        cin >> pos;

        if (cin.fail()) {
            cout << "エラー: 数字を入力してください。\n";
            cin.clear(); 
            cin.ignore(numeric_limits<streamsize>::max(), '\n'); // 不正な入力をバッファから捨てる
            continue; 
        }

        cout << "倒す方向を選択してください(L/R): ";
        cin >> dir;

        //入力値の検証
        dir = toupper(dir); // L, Rを大文字にする
        int pos2 = pos - 1;

        if (pos < 1 || pos > s.length()) {
            cout << "エラー: 番号が範囲外です。\n";
        } else if (s[pos2] != player) {
            cout << "エラー: 自分の色のドミノを選択してください。\n";
        } else if (dir != 'L' && dir != 'R') {
            cout << "エラー: 方向は L または R で入力してください。\n";
        } else {
            // 全てのチェックをパスしたらループを抜ける
            break;
        }
        cout << "もう一度入力してください。\n";

       

    }
         int pos2 = pos - 1;
     //ドミノを倒す
        for(int i=0;i<s.size();i++){
            if(dir=='R'&&pos2<=i) s[i]='.';
            else if(dir =='L'&& pos2>=i) s[i] ='.';
        }
        return s;    
}


bool check_fin(int cnt, string s){
    char next_player = ((cnt + 1) % 2 == 0) ? 'W' : 'B'; // 次のプレイヤーを決定

    
    for(int i=0; i < s.length(); i++){// 次のプレイヤーが動かせる手があるか探す
        if(s[i] == next_player){
            
            if(i > 0 && s[i-1] != '.'){// 左に倒せるか
                return true; 
            }
          
            if(i < s.length() - 1 && s[i+1] != '.'){// 右に倒せるか
                return true; 
            }
        }
    }

    return false; // ゲーム終了
}



int main() {
    string s = input_s();
    //cout << s << endl;
    int cnt =0; //先行後攻を管理
    while(true){
        cout << "先攻プレイヤーを選択してください(W,B):";
        char f;
        cin >> f;
        if(f=='W') break;
        else if(f=='B'){
            cnt++;
            break;
        }
        else cout << "W,B以外の文字は入れないでください" <<endl;
    }
    bool flag = true;

    while(true){ // メインのゲームループ
        s = game(cnt, s);
        if ( !check_fin(cnt, s) ) {
            break;
        }
        cnt++; // ターンを進める
    }

    //ゲーム終了
    char winner = (cnt % 2 == 0) ? 'W' : 'B';
    cout << "\n===============================\n";
    cout << "ゲーム終了！\n";
    cout << "最終盤面: " << s << endl;
    cout << "勝者はプレイヤー " << winner << " です！\n";
    cout << "===============================\n";

    return 0;
}
```
</details>

## 実行結果

```
./domino
ドミノをいれてください(W,Bのみで)
WWWBBB
先攻プレイヤーを選択してください(W,B):W

-------------------------------
現在の盤面:   WWWBBB
インデックス: 123456
プレイヤー W のターンです。
倒すドミノを選択してください(数字): 1
倒す方向を選択してください(L/R): L

-------------------------------
現在の盤面:   .WWBBB
インデックス: 123456
プレイヤー B のターンです。
倒すドミノを選択してください(数字): 4
倒す方向を選択してください(L/R): R

-------------------------------
現在の盤面:   .WW...
インデックス: 123456
プレイヤー W のターンです。
倒すドミノを選択してください(数字): 2
倒す方向を選択してください(L/R): L

===============================
ゲーム終了！
最終盤面: ..W...
勝者はプレイヤー W です！
===============================
```


## 分かったこと
- ドミノの数の合計が9までなら見やすいようにした
- このゲームは先手が端を着手できるとき必勝になるので面白くない？
- 追加ルールに倒していい最大の数見たいのを決めるといいかも
- 版面の値自体は全象である予想もある　
 - ルールを工夫することで戦略の考えがいのあるゲームになるのでは？

例えば、 倒していいドミノの数は初期のドミノの板の枚数の半分までとか


## 面白くない例

先手が1ターンで勝ててしまうのでゲームとして面白さにかける→倒していいドミノの工夫が必要
```
 ./domino
ドミノをいれてください(W,Bのみで)
WWWBBWWBBB
先攻プレイヤーを選択してください(W,B):B

-------------------------------
現在の盤面:   WWWBBWWBBB
インデックス: 12345678910
プレイヤー B のターンです。
倒すドミノを選択してください(数字): 10
倒す方向を選択してください(L/R): L

===============================
ゲーム終了！
最終盤面: ..........
勝者はプレイヤー B です！
===============================
```

